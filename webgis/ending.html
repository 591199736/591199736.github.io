<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>ending</title>
  <link rel="stylesheet" type="text/css" href="css/index.css">
  <link rel="stylesheet" type="text/css" href="star/css/summary.css">
  <script src="js/jquery.js"></script>
  <script src="html/access/vue.js"></script>
  <link href="https://cdn.staticfile.org/twitter-bootstrap/5.1.1/css/bootstrap.min.css" rel="stylesheet">
  <script src="https://cdn.staticfile.org/twitter-bootstrap/5.1.1/js/bootstrap.bundle.min.js"></script>
  <script src="js/jquery.js"></script>
  <style>
.left{
  height: 98%;
  width: 20%;
  background-color: rgba(0, 0, 0, 0.7);
  margin-left: 2%;
  float: left;
}
.con{
  height: 98%;
  width: 20%;
  background-color: rgba(0, 0, 0, 0.7);
  margin-left: 2%;
  float: left;
}
.right_t{
  height: 53%;
  width: 53%;
  background-color: rgba(0, 0, 0, 0.7);
  margin-left: 2%;
  float: left;
}
.right_b{
  height: 40%;
  width: 53%;
  background-color: rgba(0, 0, 0, 0.7);
  margin-left: 2%;
  margin-top: 2%;
  float: left;
}
.div1 {
  color: white;
  width: 70%;
  height: 10%;
  position: relative;
  border: 1px solid #00ff2c;
  display: inline-block;
  line-height: 60px;
  text-align: center;
  font-size: 25px;
}
.div5 {
  width: 70%;
  height: 10%;
  color: #fff;
  border: 2px solid #ffffff;
  border-radius: 10px;
  background: none;
  transition: all .3s;
  margin-top: 3%;
  /*margin: auto;*/
  display: inline-block;
  text-align: center;
  line-height: 60px;
  font-size: 25px
}
.div2 {
  width: 70%;
  height: 10%;
  color: white;
  position: relative;
  border: 1px solid #0bfe1f;
  display: inline-block;
  margin-top: 5%;
  line-height: 60px;
  text-align: center;
  font-size: 20px;
  margin-top: 5%;
}
.gradient-border {
  --borderWidth: 5px;
  /*display: flex;justify-content: center;align-items: center;*/
  text-align: center;
  background: none;
  width: 100%;
  height: 100%;
  /*position: relative;
  border-radius: var(--borderWidth);*/
  left: -49%;
  border-radius: calc(2 * var(--borderWidth));
  animation: none;
  background-size: 100% 100%;
}

  </style>
</head>
<body style="background-image:url(star/image/lastHuman.jpg)" >
<div style="height: 100%" id="background">
<div style="height: 15%;width: 100%">
  <div id="game1" style="width: 100%;height: 60%;font-size: 40px;margin-left: 2%;color: whitesmoke">大标题</div>
  <div id="game2" style="font-size: 20px;width: 100%;height: 20%;margin-left: 3%;color: whitesmoke">描述</div>
</div>
<div class="content" style="height: 85%">
  <div class="left">
    <div class="gradient-border" id="achievement" style="text-align:center">
      <div style="text-align:center" class="div5">
        <font style="font-weight:400;font-size: 26px;">入侵 · 成就</font>
      </div>
    </div>
  </div>
  <div class="con">
    <div class="gradient-border" id="yourdata">
      <div style="text-align:center" class="div5">
        <font style="font-weight:400;font-size: 26px;">数据 · 回顾</font>
      </div>
      <div style="text-align:center" class="div2">
        <font style="font-weight:400;font-size: 25px;">总计传播天数</font><p id="one"></p></font>
      </div>
      <div style="text-align:center" class="div2">
        <font style="font-weight:400;font-size: 25px;">总计感染人数<p id="two"></p></font>
      </div>
      <div style="text-align:center" class="div2">
        <font style="font-weight:400;font-size: 25px;">总计死亡人数<p id="three"></p></font>
      </div>
      <div style="text-align:center" class="div2">
        <font style="font-weight:400;font-size: 25px;">倒台国家数<p id="four"></p></font>
      </div>
      </div>
  </div>
  <div class="right_t">
    <table id="table"style="color: ghostwhite"data-side-pagination="server">
      <thead>
      <tr>
        <th data-field='name' data-sortable="true">病毒名称</th>
        <th data-field='allDead' data-sortable="true">死亡人数</th>
        <th data-field='allInf' data-sortable="true">感染人数</th>
        <th data-field='allDownFall' data-sortable="true">倒台国家数</th>
        <th data-field='alltime' data-sortable="true">传播天数</th>
      </tr>
      </thead>
    </table>
  </div>
  <div-- class="right_b">
    <div id="SOHUCS" sid="WYGS"></div>
    <script charset="utf-8" type="text/javascript" src="https://cy-cdn.kuaizhan.com/upload/changyan.js" ></script>
    <script type="text/javascript">
      window.changyan.api.config({
        appid: 'cywmtHwew',
        conf: 'prod_2a47cefc3af4d57b5610e564c021d8ad'
      });
    </script>
  </div-->
</div>
</div>
</body>
</html>
<link rel="stylesheet" href="https://unpkg.com/bootstrap-table@1.21.2/dist/bootstrap-table.min.css">
<script src="https://unpkg.com/bootstrap-table@1.21.2/dist/bootstrap-table.min.js"></script>
<script src="js/av.js"></script>
<script>
  var name = sessionStorage.getItem("name");
  var achieve = sessionStorage.getItem("achievement");
  var one = Number(sessionStorage.getItem("time"));
  var two = Number(sessionStorage.getItem("allHealth"));
  var two = Number(sessionStorage.getItem("allHealth"));
  var three = Number(sessionStorage.getItem("allDead"));
  var four = Number(sessionStorage.getItem("allDown"));
  var game = Number(sessionStorage.getItem("game"));
    console.log("d",name,one,two,three,four)
  AV.init({
    appId: "8214t07MY83hIE4Q9k4suzG1-MdYXbMMI",
    appKey: "UFmhaKqYQSr9C7ACKp6FufzR",
    serverURL: "https://591199736.github.io"
  });
  // 声明 class
  const Todo = AV.Object.extend('Bugers');

  // 构建对象
  const todo = new Todo();

        // 为属性赋值
        todo.set('UsersName',name);
        todo.set('allDead', three);
        todo.set('allDownFall', four);
        todo.set('allInf',two);
        todo.set('alltime', one);

  // 将对象保存到云端
  todo.save().then((todo) => {
    // 成功保存之后，执行其他逻辑
    console.log(`保存成功。objectId：${todo.id}`);
  }, (error) => {
    confirm('数据同步失败');// 异常处理
  });

  var data=[];
//请求数据
  const query = new AV.Query('Bugers');
  query.limit(7);
  query.find().then((bugers) => {
      for(i=0;i<bugers.length;i++){
        const Json={};
        Json['id']=i+1;
        Json['name']=bugers[i].get('UsersName');
        Json['allDead']=bugers[i].get('allDead');
        Json['allInf']=bugers[i].get('allInf');
        Json['allDownFall']=bugers[i].get('allDownFall');
        Json['alltime']=bugers[i].get('alltime');
        data.push(Json);
      }
    console.log("data",data);
    var $table = $('#table')
    $(function() {
      $table.bootstrapTable({data: data})
    })
    // students 是包含满足条件的 Student 对象的数组
  });


  if (game == 2) {
    $("#game1").html("结局1：大获全胜")
    $("#game2").html("人类其实没有死亡，它们只是变成了"+window.name+"忠诚的信徒！世界将在"+window.name+"的带领下走向光明的未来！嘎嘎！")
  }
  if (game == 3) {
    $("#game1").html("结局2：欣欣向荣")
    if(two<1000){$("#game2").html(window.name+"?谁啊没听过？")}
    else{$("#game2").html("人类是渺小的，但他们却总能一次次战胜困难，迎来新的希望！")}
  }
  if (game == 4) {
    $("#game1").html("结局3：最后的人类")
    $("#game2").html("人类火种终存续，纸船明烛照天烧")
  }
if (game == 4) {
  $("#game1").html("结局4：百年好合")
  $("#game2").html("呃，从生物学的角度来看，"+window.name+"和人类达成了互利互惠的共生关系？哦，或许应该是相爱相杀")
}

  var count = 0;
  var time1 = 0;
  window.onload = function () {
    getApi();
  }

  function getApi() {
    //设置时间 5-秒  1000-毫秒  这里设置你自己想要的时间
    setTimeout(getApi, 1 * 1000);
    window.time1 = window.time1 + 1;

    if (time1 == 4) {
      console.log(achieve);
      // 根据成就等级插入div
      if (achieve[0] == 1) {
        var div = document.getElementById('achievement');
        // 创建li元素
        var li = document.createElement('div')

        li.setAttribute("class", "div1");
        // 向li中添加文本内容
        li.innerHTML = '⭐️ 限时狙击 ⭐️'
        // 向指定div中插入li
        div.appendChild(li);
        count = count + 1;
      }
      else if (achieve[0] == 2) {
        var div = document.getElementById('achievement');
        // 创建li元素
        var li = document.createElement('div')

        li.setAttribute("class", "div1");
        // 向li中添加文本内容
        li.innerHTML = '⭐️ 雾海航行 ⭐️'
        // 向指定div中插入li
        div.appendChild(li);
        count = count + 1;
      }
      else if (achieve[0] == 3) {
        var div = document.getElementById('achievement');
        // 创建li元素
        var li = document.createElement('div')

        li.setAttribute("class", "div1");
        // 向li中添加文本内容
        li.innerHTML = '⭐️ 最后高地 ⭐️'
        // 向指定div中插入li
        div.appendChild(li);
        count = count + 1;
      }
      else if (achieve[0] == 4) {
        var div = document.getElementById('achievement');
        // 创建li元素
        var li = document.createElement('div')

        li.setAttribute("class", "div1");
        // 向li中添加文本内容
        li.innerHTML = '⭐️ 鬼火燎原 ⭐️'
        // 向指定div中插入li
        div.appendChild(li);
        count = count + 1;
      }
      if (achieve[2] == 1) {
        var div = document.getElementById('achievement');
        // 创建li元素
        var li = document.createElement('div')

        li.setAttribute("class", "div1");
        // 向li中添加文本内容
        li.innerHTML = '⭐️ 人类不死 ⭐️'
        // 向指定div中插入li
        div.appendChild(li);
        count = count + 1;
      }
      if (achieve[4] == 1) {
        var div = document.getElementById('achievement');
        // 创建li元素
        var li = document.createElement('div')

        li.setAttribute("class", "div1");
        // 向li中添加文本内容
        li.innerHTML = '⭐️ 临危不乱 ⭐️'
        // 向指定div中插入li
        div.appendChild(li);
        count = count + 1;
      }
      if (achieve[6] == 1) {
        var div = document.getElementById('achievement');
        // 创建li元素
        var li = document.createElement('div')

        li.setAttribute("class", "div1");
        // 向li中添加文本内容
        li.innerHTML = '⭐️ 恐怖肆虐 ⭐️'
        // 向指定div中插入li
        div.appendChild(li);
        count = count + 1;
      }
      else if (achieve[6] == 2) {
        var div = document.getElementById('achievement');
        // 创建li元素
        var li = document.createElement('div')

        li.setAttribute("class", "div1");
        // 向li中添加文本内容
        li.innerHTML = '⭐️ 管控无力 ⭐️'
        // 向指定div中插入li
        div.appendChild(li);
        count = count + 1;
      }
      if (achieve[8] == 1) {
        var div = document.getElementById('achievement');
        // 创建li元素
        var li = document.createElement('div')

        li.setAttribute("class", "div1");
        // 向li中添加文本内容
        li.innerHTML = '⭐️ 医者仁心 ⭐️'
        // 向指定div中插入li
        div.appendChild(li);
        count = count + 1;
      }
      if (achieve[10] == 1 && count < 5) {
        var div = document.getElementById('achievement');
        // 创建li元素
        var li = document.createElement('div')

        li.setAttribute("class", "div1");
        // 向li中添加文本内容
        li.innerHTML = '⭐️ 免疫危城 ⭐️'
        // 向指定div中插入li
        div.appendChild(li);
        count = count + 1;
      }
      if (achieve[12] == 1 && count < 5) {
        var div = document.getElementById('achievement');
        // 创建li元素
        var li = document.createElement('div')

        li.setAttribute("class", "div1");
        // 向li中添加文本内容
        li.innerHTML = '⭐️ 人类奇迹 ⭐️'
        // 向指定div中插入li
        div.appendChild(li);
        count = count + 1;
      }
      console.log(count);
      var div = document.getElementById('box');
      div.style.display = "flex";
    }
  }


  // 统计数据的滚动显示：targetNum为最终数值，delay为效果持续时间
  function numscroll(elementID, targetNum, delay) {
    let a = document.getElementById(elementID);
    let timmerA = setInterval(function () {
      if (a.innerText != targetNum) {
        let num = Number(a.innerText);
        num += Number((targetNum / delay ).toFixed(0)); //若有小数需求可自行修改此行
        if (num < targetNum) {        //针对有余数除不尽
          a.innerText = num;
        } else {
          a.innerText = targetNum;
        }
      } else {
        clearInterval(timmerA)
      }
    }, 100)
  }
  // 测试数据 到时候换成我们的
  numscroll('one', one, 5);
  numscroll('two', two, 5);
  numscroll('three', three, 5);
  numscroll('four', four, 5);
</script>
