<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<title>Mapbox GL Minimap</title>
	<link href="https://api.mapbox.com/mapbox-gl-js/v2.10.0/mapbox-gl.css" rel="stylesheet">
	<script src="https://api.mapbox.com/mapbox-gl-js/v2.10.0/mapbox-gl.js"></script>
<style>
body { margin: 0; padding: 0; }
#map { position: absolute; top: 0; bottom: 0; width: 100%;height:100%; }
</style>
</head>
<body>

<style>
    #fly {
    display: block;
    position: relative;
    margin: 0px auto;
    width: 30%;
    height: 40px;
    padding: 10px;
    border: none;
    border-radius: 3px;
    font-size: 12px;
    text-align: center;
    color: #fff;
    background:rgb(0,87,55);
    }
</style>

	<div id="map" style="width: 1280px; height: 720px;"></div>
	<script type="text/javascript" src="mapboxgl-control-minimap.js"></script>
	    <br>
    <button id="fly">Fly</button>

	<script type="text/javascript">

		mapboxgl.accessToken = "pk.eyJ1IjoiNTkxMTk5NzM2IiwiYSI6ImNrdTB2Z2k2MDB5N24ycG93aDV1NDM3czIifQ.R0sRRZwgEDoEyZBF8F1NRA";	
             const map = new mapboxgl.Map({
			container: "map",
			style: "mapbox://styles/591199736/cla17g1pb000314s4rs9sp4uu",
			center: [113.385,23.0686],
			zoom: 18,
			maxBounds:[113.377,23.06,113.391,23.076],
        		pitch: 15,
	
		});

		map.on("load", function () {
			map.addControl(new mapboxgl.Minimap({
        		center: [113.386,23.0671],
        		zoom: 14,
        		zoomLevels: []
      			}), 'top-left');
		});

	document.getElementById('fly').addEventListener('click', () => {
    const options = {
  enableHighAccuracy: true,
  timeout: 5000,
  maximumAge: 0
};

function success(pos) {
  const crd = pos.coords;
  const center={lat:crd.latitude, lng:crd.longitude};

  console.log('Your current position is:');
  console.log(`Latitude : ${crd.latitude}`);
  console.log(`Longitude: ${crd.longitude}`);
  console.log(`More or less ${crd.accuracy} meters.`);
  console.log(typeof center);
  console.log(typeof crd.longitude);


  // Fly to a random location
map.flyTo({
zoom: 19,
center: center,
essential: true // this animation is considered essential with respect to prefers-reduced-motion
});

}

function error(err) {
  console.warn(`ERROR(${err.code}): ${err.message}`);
}

navigator.geolocation.getCurrentPosition(success, error, options);


});



	</script>

</body>
</html>
